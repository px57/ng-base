{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/playroom.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../tools/gold-number/gold-number.component\";\nfunction TicketsDrawComponent_li_1_app_gold_number_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-gold-number\", 5);\n  }\n  if (rf & 2) {\n    const bobine_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"number\", bobine_r1.number);\n  }\n}\nfunction TicketsDrawComponent_li_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const bobine_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", bobine_r1.number, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"rotate\": a0\n  };\n};\nfunction TicketsDrawComponent_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"div\", 2);\n    i0.ɵɵtemplate(2, TicketsDrawComponent_li_1_app_gold_number_2_Template, 1, 1, \"app-gold-number\", 3);\n    i0.ɵɵtemplate(3, TicketsDrawComponent_li_1_span_3_Template, 2, 1, \"span\", 4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const bobine_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, !bobine_r1.stopped));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", bobine_r1.stopped);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !bobine_r1.stopped);\n  }\n}\n/**\n * https://medium.com/@victortoschi/how-to-create-a-slot-machine-animation-with-css-and-javascript-9073ab9db9ea\n * https://codepen.io/AdrianSandu/pen/MyBQYz\n * Number animation\n * https://codepen.io/konstantindenerz/pen/zYJzvEQ\n * Frosted glass\n * https://frosted-glass.shud.in/\n */\nexport let TicketsDrawComponent = /*#__PURE__*/(() => {\n  var _class;\n  class TicketsDrawComponent {\n    /**\n     * @description:\n     */\n    constructor(playroom_service) {\n      this.playroom_service = playroom_service;\n      /**\n       * @description:\n       */\n      this.items = [\n      // '?', \n      1, 2, 3, 4, 5, 6, 7, 8, 9, 0];\n      /**\n       * @description:\n       */\n      this.animation_velocity = ['after1second', 'after2second', 'after3second', 'after4second', 'after5second', 'after6second', 'after7second'];\n      /**\n       * @description:\n       */\n      this.bobine_list = [];\n    }\n    /**\n     * @description:\n     */\n    ngOnInit() {\n      this.generatebobine_list();\n      this.bindPlayroomWinningTicketPrintRun();\n    }\n    /**\n     * @description: Sert de recepteur pour l'evenement de tirage de ticket gagnant\n     */\n    bindPlayroomWinningTicketPrintRun() {\n      this.playroom_service.stream_winning_number.subscribe(data => {\n        this.stop_bobine(data);\n      });\n    }\n    /**\n     * @description:\n     */\n    generatebobine_list() {\n      this.bobine_list = [];\n      for (let i = 0; i < 7; i++) {\n        this.bobine_list.push({\n          number: this.items[Math.floor(Math.random() * this.items.length)],\n          stopped: false\n        });\n      }\n    }\n    /**\n     * @description:\n     */\n    alternate_bobine() {\n      for (let bobine of this.bobine_list) {\n        if (bobine.stopped) {\n          continue;\n        }\n        bobine.number = this.items[Math.floor(Math.random() * this.items.length)];\n      }\n      setTimeout(() => {\n        this.alternate_bobine();\n      }, 50);\n    }\n    /**\n     * @description:\n     */\n    ngAfterViewInit() {\n      this.alternate_bobine();\n    }\n    /**\n     * @description:\n     */\n    stop_bobine(bobine_stop_event) {\n      let bobine = this.bobine_list[bobine_stop_event.bobine];\n      bobine.stopped = true;\n      bobine.number = bobine_stop_event.number;\n    }\n  }\n  _class = TicketsDrawComponent;\n  _class.ɵfac = function TicketsDrawComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.PlayroomService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-tickets-draw\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"tickets_draw_container\"], [4, \"ngFor\", \"ngForOf\"], [1, \"number_container\", 3, \"ngClass\"], [3, \"number\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"number\"]],\n    template: function TicketsDrawComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ul\", 0);\n        i0.ɵɵtemplate(1, TicketsDrawComponent_li_1_Template, 4, 5, \"li\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.bobine_list);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.GoldNumberComponent],\n    styles: [\".tickets_draw_container[_ngcontent-%COMP%]{padding-left:2%;padding-right:2%;height:100%;display:flex;overflow:hidden}.tickets_draw_container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-self:center;width:14%;text-align:center;border-right:1px solid wheat;height:50%;vertical-align:middle;font-weight:700}.tickets_draw_container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .slot_machine[_ngcontent-%COMP%]{align-self:center;margin:auto;color:#fff;overflow:hidden;font-size:2.5em}.tickets_draw_container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .slot_machine[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tickets_draw_container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-right:none}.tickets_draw_container[_ngcontent-%COMP%]   .number_container[_ngcontent-%COMP%]{align-self:center;text-align:center;width:100%;font-size:2.53em;color:#fff}.tickets_draw_container[_ngcontent-%COMP%]   .number_container.rotate[_ngcontent-%COMP%]{filter:url(#blurFilter)}.tickets_draw_container[_ngcontent-%COMP%]   .infinite_turn[_ngcontent-%COMP%]{transform:translate(0)}.tickets_draw_container[_ngcontent-%COMP%]   .infinite_turn[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:41px;border:none;transform:translate(3px);height:22.9px}.tickets_draw_container[_ngcontent-%COMP%]   .infinite_turn[_ngcontent-%COMP%]   li.center[_ngcontent-%COMP%]{height:30px}@keyframes _ngcontent-%COMP%_infinite_turn{0%{transform:translateY(-660px)}to{transform:translate(0)}}.bobine_stop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bobine_stop linear 1s}@keyframes _ngcontent-%COMP%_bobine_stop{0%{transform:translate(0)}to{transform:translate(0)}}\"]\n  });\n  return TicketsDrawComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}