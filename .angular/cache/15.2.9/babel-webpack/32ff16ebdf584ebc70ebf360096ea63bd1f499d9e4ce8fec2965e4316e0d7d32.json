{"ast":null,"code":"var _class;\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/modules/uploadmanager/services/upload.service\";\nimport * as i2 from \"src/modules/profile/services/user.service\";\nexport class AvatarUpdateComponent {\n  /**\n   * @description:\n   */\n  constructor(upload_service, userService) {\n    this.upload_service = upload_service;\n    this.userService = userService;\n    /**\n     * @description:\n     */\n    this.upload_settings = {\n      type: 'single',\n      label: 'avatar',\n      file_type: 'image',\n      max_file_size: 25 * 1024 * 1024,\n      is_private: true,\n      progress: 0,\n      file_list: [],\n      stream: new Subject()\n    };\n  }\n  /**\n   * @description:\n   */\n  ngOnInit() {\n    this.upload_settings.stream.subscribe(stream => {\n      if (stream.event === 'finished') {\n        this.userService.update_avatar(stream.data.file);\n      }\n    });\n  }\n  /**\n   * @description:\n   */\n  update_avatar($event) {\n    this.upload_service.clickButtonUpload(this.upload_settings).then(upload_object => {\n      // alert(upload_object);\n    });\n  }\n}\n_class = AvatarUpdateComponent;\n_class.ɵfac = function AvatarUpdateComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.UploadService), i0.ɵɵdirectiveInject(i2.UserService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-avatar-update\"]],\n  decls: 2,\n  vars: 0,\n  consts: [[3, \"click\"]],\n  template: function AvatarUpdateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function AvatarUpdateComponent_Template_button_click_0_listener($event) {\n        return ctx.update_avatar($event);\n      });\n      i0.ɵɵtext(1, \" Update avatar\\n\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AAKA,SAASA,OAAO,QAAQ,MAAM;;;;AAO9B,OAAM,MAAOC,qBAAqB;EAehC;;;EAGAC,YACUC,cAA6B,EAC7BC,WAAwB;IADxB,mBAAc,GAAdD,cAAc;IACd,gBAAW,GAAXC,WAAW;IAnBrB;;;IAGQ,oBAAe,GAAmB;MACxCC,IAAI,EAAE,QAAQ;MACdC,KAAK,EAAE,QAAQ;MACfC,SAAS,EAAE,OAAO;MAClBC,aAAa,EAAI,EAAE,GAAG,IAAI,GAAK,IAAI;MACnCC,UAAU,EAAE,IAAI;MAChBC,QAAQ,EAAE,CAAC;MACXC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE,IAAIZ,OAAO;KACpB;EAQG;EAEJ;;;EAGOa,QAAQ;IACb,IAAI,CAACC,eAAe,CAACF,MAAM,CAACG,SAAS,CAAEH,MAAW,IAAI;MACpD,IAAIA,MAAM,CAACI,KAAK,KAAK,UAAU,EAAE;QAC/B,IAAI,CAACZ,WAAW,CAACa,aAAa,CAACL,MAAM,CAACM,IAAI,CAACC,IAAI,CAAC;;IAEpD,CAAC,CAAC;EACJ;EAEA;;;EAGOF,aAAa,CAACG,MAAW;IAC9B,IAAI,CAACjB,cAAc,CAACkB,iBAAiB,CAAC,IAAI,CAACP,eAAe,CAAC,CAACQ,IAAI,CAAEC,aAAkB,IAAI;MACtF;IAAA,CACD,CAAC;EACJ;;SAzCWtB,qBAAqB;;mBAArBA,MAAqB;AAAA;;QAArBA,MAAqB;EAAAuB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZlCC,iCACoC;MAAhCA;QAAA,OAASC,yBAAqB;MAAA,EAAC;MAC/BD,gCACJ;MAAAA,iBAAS","names":["Subject","AvatarUpdateComponent","constructor","upload_service","userService","type","label","file_type","max_file_size","is_private","progress","file_list","stream","ngOnInit","upload_settings","subscribe","event","update_avatar","data","file","$event","clickButtonUpload","then","upload_object","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/var/projects/gtender/client2/src/modules/profile/components/avatar-update/avatar-update.component.ts","/var/projects/gtender/client2/src/modules/profile/components/avatar-update/avatar-update.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { UserService } from 'src/modules/profile/services/user.service';\nimport { FileService } from 'src/app/services/file.service';\nimport { HttpService } from 'src/modules/tools/services/http.service';\nimport { UploadService, UploadSettings } from 'src/modules/uploadmanager/services/upload.service';\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'app-avatar-update',\n  templateUrl: './avatar-update.component.html',\n  styleUrls: ['./avatar-update.component.scss']\n})\nexport class AvatarUpdateComponent {\n  /**\n   * @description: \n   */\n  private upload_settings: UploadSettings = {\n    type: 'single',\n    label: 'avatar',\n    file_type: 'image',\n    max_file_size: ( 25 * 1024 ) * 1024,\n    is_private: true,\n    progress: 0,\n    file_list: [],\n    stream: new Subject()\n  };\n\n  /**\n   * @description:\n   */\n  constructor(\n    private upload_service: UploadService,\n    private userService: UserService,\n  ) { }\n \n  /**\n   * @description:\n   */\n  public ngOnInit(): void {\n    this.upload_settings.stream.subscribe((stream: any) => {\n      if (stream.event === 'finished') { \n        this.userService.update_avatar(stream.data.file);\n      }\n    });\n  }\n\n  /**\n   * @description:\n   */\n  public update_avatar($event: any) {\n    this.upload_service.clickButtonUpload(this.upload_settings).then((upload_object: any) => {\n      // alert(upload_object);\n    });\n  }\n}","<button \n    (click)=\"update_avatar($event)\">\n    Update avatar\n</button>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}